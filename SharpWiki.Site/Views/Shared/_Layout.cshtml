@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <nav class="navbar navbar-inverse navbar-static-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/"><span class="glyphicon"><img src="@ViewBag.BrandImageSmall" /></span> @Html.Raw(ViewBag.Name)</a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
                <ul class="nav navbar-nav">

                    @foreach (SharpWiki.Shared.Models.Data.MenuItem item in ViewBag.MenuItems)
                    {
                        <li><a href="@item.Link">@item.Name</a></li>
                    }

                    @if (@ViewBag.Context?.IsPageLoaded == true)
                    {
                        <li><a href="/@ViewBag.PageNavigation/History">History</a></li>
                    }

                    @if (@ViewBag.Context?.IsPageLoaded == true && @ViewBag.Context?.CanEdit == true)
                    {
                        if (@ViewBag.Context?.IsViewingOldVersion == false)
                        {
                            <li><a href="/Page/Edit/@ViewBag.PageNavigation">Edit</a></li>
                        }
                        <li><a href="/Page/Edit/">Create Page</a></li>
                    }
                    else if (@ViewBag.CreatePage == true)
                    {
                        <li><a href="/Page/Edit/@ViewBag.PageNavigation">Create</a></li>
                    }

                    @if (@ViewBag?.Context?.IsAuthenticated == true && @ViewBag?.Context?.Roles.Contains(SharpWiki.Shared.Library.Constants.Roles.Administrator))
                    {
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Administration<span class="caret"></span></a>
                            <ul class="dropdown-menu" aria-labelledby="about-us">
                                <li><a href="/Admin/Config" class="list-group-item">Configuration</a></li>
                                <li><a href="/Admin/Accounts" class="list-group-item">Accounts</a></li>
                                <li><a href="/Admin/Roles" class="list-group-item">Roles</a></li>
                            </ul>
                        </li>
                    }

                    @if (@ViewBag?.Context?.IsAuthenticated == true)
                    {
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Your Profile<span class="caret"></span></a>
                            <ul class="dropdown-menu" aria-labelledby="about-us">
                                <li><a href="/User/UserProfile" class="list-group-item">Profile</a></li>
                                <li><a href="/User/ChangePassword" class="list-group-item">Change Password</a></li>
                                <li><a href="/User/Logout" class="list-group-item">Logout</a></li>
                            </ul>
                        </li>
                    }

                    @if (@ViewBag?.Context?.IsAuthenticated == false)
                    {
                        <li><a href="/User/Login?ReturnUrl=@Request.Url.PathAndQuery">Login</a></li>
                    }

                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        @RenderBody()
    </div>

    <footer>
        @if (ViewBag.FooterBlurb != null)
        {
        <div class="footer-blurb">
            <div class="container">
                <div class="row">@Html.Raw(ViewBag.FooterBlurb)</div>
            </div>
        </div>
        }
        @if (ViewBag.Copyright != null)
        {
        <div class="small-print">
            <div class="container">
                <p>@Html.Raw(ViewBag.Copyright)</p>
            </div>
        </div>
        }
    </footer>

    <script src="/js/jquery-1.11.3.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/ie10-viewport-bug-workaround.js"></script>
    <script src="/js/holder.min.js"></script>
</body>
</html>
